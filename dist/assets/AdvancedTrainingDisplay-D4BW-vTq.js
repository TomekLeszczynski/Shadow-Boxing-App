import{_ as V,a as q,b as K,c as O,e as Q,n as X,p as Y,d as Z}from"./nextCommandDelay-CUy3jAid.js";import{G as ee,H as te,I as se,J as ne,d as ae,i as oe,x as re,k as ie,b as w,j as u,y as E,l as le,z as ce,o as a,p as F,m as d,c,t as v,A as y,s as r,a as m,g as $,C as ue,D as de,E as ve}from"./index-exg_pBLu.js";let _;const S=(i,e,l,f)=>{_=setInterval(()=>{if(e.value>0){e.value--;return}if(i.value>0&&e.value===0){i.value--,e.value=59;return}else{f&&f(),clearInterval(_),l();return}},1e3)},me=ee(te,"gs://shadow-boxing-workout.appspot.com/audio/advanced/low_complexity"),x=[],_e=async()=>{try{const i=await se(me);for(const e of i.items)try{const l=await ne(e);x.push(l)}catch(l){console.error("Error downloading advanced combinations audio files:"+l)}}catch(i){console.error("Error listing files:"+i)}},fe={key:0,class:"text-4xl capitalize md:text-5xl","aria-label":"Training Phase"},he={key:0,class:"text-[10rem] md:text-[14rem] text-center divide-y-4 w-[20rem]"},pe={class:"block pb-4"},ge={class:"pt-4"},ye={key:0},xe={key:0,class:"text-6xl md:text-[12rem] text-custom-white"},ke={key:1,class:"text-8xl md:text-[12rem]"},Ie=m("p",null,"Well",-1),we=m("p",null,"done!",-1),Se=[Ie,we],be={key:0},Ce={key:1},Te=3,Re=ae({__name:"AdvancedTrainingDisplay",setup(i){const e=oe(),l=re(),f=ie(),h=w(0),o=w(0),n=w(0),P=()=>{e.toggleStatus()},W=async()=>{const t=l.user;if(t&&e.status==="done")try{const s=ue(de,"users",t.uid,"trainings");await ve(s,{training:"advanced",rounds:e.rounds,complexity:e.complexity,intensity:e.intensity,date:new Date})}catch(s){console.error("Saving Advanced Training Session Error:"+s)}},M=u(()=>h.value===e.rounds),p=u(()=>e.status=="work"),N=u(()=>e.status=="paused"),b=u(()=>e.status=="done"),B=u(()=>M.value&&o.value==0&&n.value==0),C={minutes:3,seconds:0},T={minutes:1,seconds:0},k=(t,s)=>{o.value=t,n.value=s},L=()=>{k(C.minutes,C.seconds),Y(),S(o,n,A,Z)},z=()=>{e.status="work",h.value++},U=()=>{D(),k(o.value,n.value),S(o,n,A),I()},j=()=>{B.value?(e.status="done",clearInterval(_)):(k(T.minutes,T.seconds),S(o,n,z))},A=()=>{e.status="rest"},D=()=>{clearInterval(_),clearInterval(g)},G=()=>{L(),I()};E(()=>e.status,(t,s)=>{t=="work"?s=="paused"?U():G():t=="rest"||t=="done"?j():t=="paused"&&clearInterval(_)}),E(()=>f.countdownFinished,t=>{t&&(h.value=1,e.status="work")});let R,g;const H=u(()=>o.value===0&&n.value<=3),J=t=>{if(t){const s=Math.floor(Math.random()*x.length);R=t[s]}else console.error("URLs array is empty: "+Error)},I=()=>{e.status==="work"&&!H.value?(J(x),Q(R),clearInterval(g),g=setInterval(I,X(Te,e.intensity)*1e3)):clearInterval(g)};return le(async()=>{if(x.length==0)await _e();else return}),ce(()=>{D(),e.$reset()}),(t,s)=>(a(),F(V,null,{"additional-info":d(()=>[p.value?(a(),c("div",fe,v(y(e).status),1)):r("",!0)]),"main-info":d(()=>[p.value?(a(),c("div",he,[m("span",pe,"0"+v(o.value),1),m("div",ge,[n.value<10?(a(),c("span",ye,"0")):r("",!0),m("span",null,v(n.value),1)])])):r("",!0)]),"training-status-info":d(()=>[N.value?(a(),c("span",xe,"Paused")):r("",!0),b.value?(a(),c("div",ke,Se)):r("",!0)]),"session-data":d(()=>[p.value?(a(),c("span",be,"Round "+v(h.value)+" of ",1)):r("",!0),p.value?(a(),c("span",Ce,v(y(e).rounds),1)):r("",!0)]),"buttons-section":d(()=>[$(q,{"on-click-handler":P,status:y(e).status},null,8,["status"]),$(K,{status:y(e).status},null,8,["status"]),b.value?(a(),F(O,{key:0,"save-session":W})):r("",!0)]),_:1}))}});export{Re as default};
